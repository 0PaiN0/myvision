!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=fabric},function(t,e,n){"use strict";n.r(e);var o=n(0),i=n.n(o);let r=!1,a=null,l=null;function s(){r&&(l.remove(a),r=!1,document.getElementById("labelNamePopUp").style.display="none")}window.labelBndBox=function(){const t=document.getElementById("label-title").value;document.getElementById("labelNamePopUp").style.display="none";const e=new i.a.Text(t,{fontSize:10,fill:"yellow",left:a.left,top:a.top,width:a.width,height:a.height}),n=new i.a.Group([a,e],{left:a.left,top:a.top,width:a.width,height:a.height,stroke:"rgba(255,0,0)",strokeWidth:2,fill:"rgba(255,0,0,0.1)"});r=!0,l.remove(a),l.add(n)};let c=null,d=!1,u=!1;const h={};function f(){s(),d=!0,c.discardActiveObject(),c.renderAll(),c.forEachObject(t=>{t.selectable=!1}),c.defaultCursor="crosshair",c.hoverCursor="crosshair"}function g(t){if(u){d=!1,u=!1,h.rect.setCoords(),h.rect.selectable=!1,c.defaultCursor="default",c.hoverCursor="move",c.forEachObject(t=>{t.selectable=!0});const e=c.getPointer(t.e);!function(t,e,n,o){a=n,l=o;const i=document.getElementById("labelNamePopUp");i.style.display="block";const s=document.getElementById("canvas-wrapper").getBoundingClientRect(),c=s.top,d=s.left;i.style.top=`${e+c}px`,i.style.left=`${t+d}px`,r=!0}(e.x,e.y,h.rect,c)}}function m(){s(),c.remove(c.getActiveObject())}function p(t){c=t,t.on("mouse:down",()=>{!function(){if(d){u=!0;const t=c.getPointer(c.e);h.origX=t.x,h.origY=t.y,h.rect=new i.a.Rect({left:h.origX,top:h.origY,width:t.x-h.origX,height:t.y-h.origY,stroke:"rgba(255,0,0)",strokeWidth:2,fill:"rgba(255,0,0,0)"}),c.add(h.rect)}}()}),t.on("mouse:over",t=>{!function(t){t.target&&t.target._objects&&(t.target._objects[0].set("fill","rgba(255,0,0,0.2)"),c.renderAll())}(t)}),t.on("mouse:out",t=>{!function(t){t.target&&t.target._objects&&(t.target._objects[0].set("fill","rgba(255,0,0,0"),c.renderAll())}(t)}),t.on("mouse:move",t=>{!function(t){if(!u)return;const e=c.getPointer(t.e);h.origX>e.x&&h.rect.set({left:Math.abs(e.x)}),h.origY>e.y&&h.rect.set({top:Math.abs(e.y)}),h.rect.set({width:Math.abs(h.origX-e.x)}),h.rect.set({height:Math.abs(h.origY-e.y)}),c.renderAll()}(t)}),t.on("mouse:up",t=>{g(t)})}const w={uploaded:!1,name:null},b={};let x=null;function y(){w.uploaded=!0;const t=document.createElement("canvas");if(b.maximumCanvasHeight<this.height){const e=b.maximumCanvasHeight/this.height;if(t.height=b.maximumCanvasHeight,t.width=this.width*e,b.maximumCanvasWidth<t.width){const e=b.maximumCanvasWidth/this.width;t.width=b.maximumCanvasWidth,t.height*=e}t.getContext("2d").drawImage(this,0,0,t.width,t.height),x.setWidth(t.width),x.setHeight(t.height),x.setBackgroundColor({source:t.toDataURL()},()=>{x.renderAll()})}else if(b.maximumCanvasWidth<this.width){const e=b.maximumCanvasWidth/this.width;t.width=b.maximumCanvasWidth,t.height*=e,t.getContext("2d").drawImage(this,0,0,t.width,t.height),x.setWidth(t.width),x.setHeight(t.height),x.setBackgroundColor({source:t.toDataURL()},()=>{x.renderAll()})}else x.setWidth(this.width),x.setHeight(this.height),x.setBackgroundColor({source:this.src},()=>{x.renderAll()})}function v(t){const e=new Image;e.src=t.target.result,e.onload=y}function j(t){if(s(),t.files&&t.files[0]){b.maximumCanvasHeight=window.innerHeight-54,b.maximumCanvasWidth=window.innerWidth-110;const e=new FileReader;w.name=t.files[0].name,e.onload=v,e.readAsDataURL(t.files[0])}}function C(t){return function t(e){let n="";return Object.keys(e).forEach(o=>{"object"==typeof e[o]?n+=`<${o}>${t(e[o])}</${o}>`:n+=`<${o}>${e[o]}</${o}>`}),n}(t)}let B=null;function O(){const t={};return t.annotations={folder:"Unknown",filename:w.name,path:"Unknown",source:{database:"Unknown"},size:{width:B.getWidth(),height:B.getHeight(),depth:1},segmented:0},t.annotations.object=function(){let t={};return B.forEachObject(e=>{const n=e._objects[0],o=e._objects[1].text;t={name:o,pose:"Unspecified",truncated:1,difficult:0,bndbox:{xmin:n.left,ymin:n.top,xmax:n.left+n.width,ymax:n.top+n.height}}}),t}(),C(t)}function k(){if(s(),w.uploaded){!function(t){const e=new RegExp("^([^.]+)"),n=document.createElement("a"),o=new Blob([t],{type:"text/plain"});n.setAttribute("href",window.URL.createObjectURL(o));const i=`${e.exec(w.name)[0]}.xml`;n.setAttribute("download",i),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.draggable=!0,n.classList.add("dragout"),n.click()}(O())}}const W=function(){const t=new i.a.Canvas("c",{selection:!1});return i.a.Object.prototype.transparentCorners=!1,function(t){p(t)}(t),x=t,function(t){return t.setBackgroundColor({source:"sample-img.jpg",repeat:"repeat"},()=>{t.renderAll()}),t}(t)}();var A;window.createNewBndBox=f,window.removeBndBox=m,window.readURL=j,A=W,window.downloadXML=k,B=A}]);