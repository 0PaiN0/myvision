!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=fabric},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o);let r=!1,a=null,l=null;function c(){r&&(l.remove(a),r=!1,document.getElementById("labelNamePopUp").style.display="none")}window.labelBndBox=function(){const e=document.getElementById("label-title").value;document.getElementById("labelNamePopUp").style.display="none";const t=new i.a.Text(e,{fontSize:10,fill:"yellow",left:a.left,top:a.top,width:a.width,height:a.height}),n=new i.a.Group([a,t],{left:a.left,top:a.top,width:a.width,height:a.height,stroke:"rgba(255,0,0)",strokeWidth:2,fill:"rgba(255,0,0,0.1)"});r=!0,l.remove(a),l.add(n)};let u=null,s=!1,d=!1;const f={};function h(){u.backgroundColor&&(c(),s=!0,u.discardActiveObject(),u.renderAll(),u.forEachObject(e=>{e.selectable=!1}),u.defaultCursor="crosshair",u.hoverCursor="crosshair")}function g(e){if(d){s=!1,d=!1,f.rect.setCoords(),f.rect.selectable=!1,u.defaultCursor="default",u.hoverCursor="move",u.forEachObject(e=>{e.selectable=!0});const t=u.getPointer(e.e);!function(e,t,n,o){a=n,l=o;const i=document.getElementById("labelNamePopUp");i.style.display="block";const c=document.getElementById("canvas-wrapper").getBoundingClientRect(),u=c.top,s=c.left;i.style.top=`${t+u}px`,i.style.left=`${e+s}px`,r=!0}(t.x,t.y,f.rect,u)}}function m(){c(),u.remove(u.getActiveObject())}function b(e){u=e,e.on("mouse:down",()=>{!function(){if(s){d=!0;const e=u.getPointer(u.e);f.origX=e.x,f.origY=e.y,f.rect=new i.a.Rect({left:f.origX,top:f.origY,width:e.x-f.origX,height:e.y-f.origY,stroke:"rgba(255,0,0)",strokeWidth:2,fill:"rgba(255,0,0,0)"}),u.add(f.rect)}}()}),e.on("mouse:over",e=>{!function(e){e.target&&e.target._objects&&(e.target._objects[0].set("fill","rgba(255,0,0,0.2)"),u.renderAll())}(e)}),e.on("mouse:out",e=>{!function(e){e.target&&e.target._objects&&(e.target._objects[0].set("fill","rgba(255,0,0,0"),u.renderAll())}(e)}),e.on("mouse:move",e=>{!function(e){if(!d)return;const t=u.getPointer(e.e);f.origX>t.x&&f.rect.set({left:Math.abs(t.x)}),f.origY>t.y&&f.rect.set({top:Math.abs(t.y)}),f.rect.set({width:Math.abs(f.origX-t.x)}),f.rect.set({height:Math.abs(f.origY-t.y)}),u.renderAll()}(e)}),e.on("mouse:up",e=>{g(e)})}const p={uploaded:!1,name:null},w={};let x=null;function y(e,t){t?function(e,t){x.setWidth(t.width),x.setHeight(t.height),i.a.Image.fromURL(e.src,e=>{x.setBackgroundImage(e,x.renderAll.bind(x),{scaleX:x.width/e.width,scaleY:x.height/e.height})})}(e,t):function(e){x.setWidth(e.width),x.setHeight(e.height),x.setBackgroundColor({source:e.src},()=>{x.renderAll()})}(e)}function v(e){const t={},n=w.maximumCanvasWidth/e.width;return t.width=w.maximumCanvasWidth,t.height=e.height*n,t}function j(){p.uploaded=!0;const e=this;if(w.maximumCanvasHeight<e.height){let t=function(e){const t={},n=w.maximumCanvasHeight/e.height;return t.height=w.maximumCanvasHeight,t.width=e.width*n,t}(e);w.maximumCanvasWidth<t.width&&(t=v(t)),y(e,t)}else if(w.maximumCanvasWidth<e.width){y(e,v(e))}else y(e)}function C(e){const t=new Image;t.src=e.target.result,t.onload=j}function B(e){if(c(),e.files&&e.files[0]){const t=new FileReader;p.name=e.files[0].name,t.onload=C,t.readAsDataURL(e.files[0])}}function O(e){x=e,w.maximumCanvasHeight=window.innerHeight-54,w.maximumCanvasWidth=window.innerWidth-110}function k(e){return function e(t){let n="";return Object.keys(t).forEach(o=>{"object"==typeof t[o]?n+=`<${o}>${e(t[o])}</${o}>`:n+=`<${o}>${t[o]}</${o}>`}),n}(e)}let _=null;function A(e){const t=document.createElement("a"),n=new Blob([e],{type:"text/plain"});return t.setAttribute("href",window.URL.createObjectURL(n)),t.setAttribute("download",`${new RegExp("^([^.]+)").exec(p.name)[0]}.xml`),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.draggable=!0,t.classList.add("dragout"),t}function E(){if(c(),_.backgroundColor){!function(e){A(e).click()}(k(function(e,t){const n={};return n.annotations=function(e,t){return{folder:"Unknown",filename:t.name,path:"Unknown",source:{database:"Unknown"},size:{width:e.getWidth(),height:e.getHeight(),depth:1},segmented:0}}(e,t),n.annotations.object=function(e){let t={};return e.forEachObject(e=>{const n=e._objects[0],o=e._objects[1].text;t={name:o,pose:"Unspecified",truncated:1,difficult:0,bndbox:{xmin:n.left,ymin:n.top,xmax:n.left+n.width,ymax:n.top+n.height}}}),t}(e),n}(_,p)))}}!function(){const e=new i.a.Canvas("c",{selection:!1});i.a.Object.prototype.transparentCorners=!1,function(e){b(e)}(e),O(e),_=e}(),window.createNewBndBox=h,window.removeBndBox=m,window.uploadImage=B,window.downloadXML=E}]);