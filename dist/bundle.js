!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=fabric},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o);let i=!1,l=null,a=null;function s(){i&&(a.remove(l),i=!1,document.getElementById("labelNamePopUp").style.display="none")}window.labelBndBox=function(){const e=document.getElementById("label-title").value;document.getElementById("labelNamePopUp").style.display="none";const t=new r.a.Text(e,{fontSize:10,fill:"yellow",left:l.left,top:l.top,width:l.width,height:l.height}),n=new r.a.Group([l,t],{left:l.left,top:l.top,width:l.width,height:l.height,stroke:"rgba(255,0,0)",strokeWidth:2,fill:"rgba(255,0,0,0.1)"});i=!0,a.remove(l),a.add(n)};let c=null,u=!1,d=!1;const f={};function g(e){if(d){u=!1,d=!1,f.rect.setCoords(),f.rect.selectable=!1,c.defaultCursor="default",c.hoverCursor="move",c.forEachObject(e=>{e.selectable=!0});const t=c.getPointer(e.e);!function(e,t,n,o){l=n,a=o;const r=document.getElementById("labelNamePopUp");r.style.display="block";const s=document.getElementById("canvas-wrapper").getBoundingClientRect(),c=s.top,u=s.left;r.style.top=`${t+c}px`,r.style.left=`${e+u}px`,i=!0}(t.x,t.y,f.rect,c)}}function h(){s(),c.remove(c.getActiveObject())}const m={};function w(e,t,n){return{radius:5,fill:"#ffffff",stroke:"#333333",strokeWidth:.5,left:t.e.layerX/n.getZoom(),top:t.e.layerY/n.getZoom(),selectable:!1,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",id:e,objectCaching:!1}}m.newPolygon={stroke:"#333333",strokeWidth:.5,fill:"red",opacity:1,perPixelTargetFind:!0,hasBorders:!1,hasControls:!1},m.newTempPolygon={stroke:"#333333",strokeWidth:1,fill:"#cccccc",opacity:.3,selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1},m.newLine={strokeWidth:2,fill:"#999999",stroke:"#999999",class:"line",originX:"center",originY:"center",selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1},m.firstCircle={fill:"red"},m.newCircle=w;const p=99,b=999999;let y=null,v=[],x=[],C=!0,j=null,_=!1;function P(e){e.target&&e.target.id===v[0].id&&function(){const e=[];v.forEach(t=>{e.push({x:t.left,y:t.top}),y.remove(t)}),x.forEach(e=>{y.remove(e)}),y.remove(_).remove(j);const t=new r.a.Polygon(e,m.newPolygon);y.add(t),j=null,_=null,C=!1,y.selection=!0}(),C&&function(e){const t=Math.floor(Math.random()*(b-p+1))+p,n=(new Date).getTime()+t,o=new r.a.Circle(m.newCircle(n,e,y));0===v.length&&o.set(m.firstCircle);let i=[e.e.layerX/y.getZoom(),e.e.layerY/y.getZoom(),e.e.layerX/y.getZoom(),e.e.layerY/y.getZoom()];const l=new r.a.Line(i,m.newLine);if(_){const t=y.getPointer(e.e);(i=_.get("points")).push({x:t.x,y:t.y});const n=new r.a.Polygon(i,m.newTempPolygon);y.remove(_),y.add(n),_=n,y.renderAll()}else{const t=[{x:e.e.layerX/y.getZoom(),y:e.e.layerY/y.getZoom()}],n=new r.a.Polygon(t,m.newTempPolygon);_=n,y.add(n)}j=l,v.push(o),x.push(l),y.add(l),y.add(o),y.selection=!1}(e)}let k=null;function B(){k.on("mouse:down",()=>{!function(){if(u){d=!0;const e=c.getPointer(c.e);f.origX=e.x,f.origY=e.y,f.rect=new r.a.Rect({left:f.origX,top:f.origY,width:e.x-f.origX,height:e.y-f.origY,stroke:"rgba(255,0,0)",strokeWidth:2,fill:"rgba(255,0,0,0)"}),c.add(f.rect)}}()}),k.on("mouse:over",e=>{!function(e){e.target&&e.target._objects&&(e.target._objects[0].set("fill","rgba(255,0,0,0.2)"),c.renderAll())}(e)}),k.on("mouse:out",e=>{!function(e){e.target&&e.target._objects&&(e.target._objects[0].set("fill","rgba(255,0,0,0"),c.renderAll())}(e)}),k.on("mouse:move",e=>{!function(e){if(!d)return;const t=c.getPointer(e.e);f.origX>t.x&&f.rect.set({left:Math.abs(t.x)}),f.origY>t.y&&f.rect.set({top:Math.abs(t.y)}),f.rect.set({width:Math.abs(f.origX-t.x)}),f.rect.set({height:Math.abs(f.origY-t.y)}),c.renderAll()}(e)}),k.on("mouse:up",e=>{g(e)})}function L(){y=k,C=!0,v=[],x=[],j=null,k.on("mouse:down",e=>{P(e)}),k.on("mouse:move",e=>{!function(e){if(j&&"line"===j.class){const t=y.getPointer(e.e);j.set({x2:t.x,y2:t.y});const n=_.get("points");n[v.length]={x:t.x,y:t.y},_.set({points:n}),y.renderAll()}y.renderAll()}(e)})}function O(){k.__eventListeners&&(k.__eventListeners["mouse:down"]=[],k.__eventListeners["mouse:over"]=[],k.__eventListeners["mouse:out"]=[],k.__eventListeners["mouse:move"]=[],k.__eventListeners["mouse:up"]=[])}function W(){O(),(c=k).backgroundColor&&(s(),u=!0,c.discardActiveObject(),c.renderAll(),c.forEachObject(e=>{e.selectable=!1}),c.defaultCursor="crosshair",c.hoverCursor="crosshair"),B()}function A(){O(),L()}const E={uploaded:!1,name:null},X={};let Y=null;function M(e,t){t?function(e,t){Y.setWidth(t.width),Y.setHeight(t.height),r.a.Image.fromURL(e.src,e=>{Y.setBackgroundImage(e,Y.renderAll.bind(Y),{scaleX:Y.width/e.width,scaleY:Y.height/e.height})})}(e,t):function(e){Y.setWidth(e.width),Y.setHeight(e.height),Y.setBackgroundColor({source:e.src},()=>{Y.renderAll()})}(e)}function U(e){const t={},n=X.maximumCanvasWidth/e.width;return t.width=X.maximumCanvasWidth,t.height=e.height*n,t}function I(){E.uploaded=!0;const e=this;if(X.maximumCanvasHeight<e.height){let t=function(e){const t={},n=X.maximumCanvasHeight/e.height;return t.height=X.maximumCanvasHeight,t.width=e.width*n,t}(e);X.maximumCanvasWidth<t.width&&(t=U(t)),M(e,t)}else if(X.maximumCanvasWidth<e.width){M(e,U(e))}else M(e)}function $(e){const t=new Image;t.src=e.target.result,t.onload=I}function H(e){if(s(),e.files&&e.files[0]){const t=new FileReader;E.name=e.files[0].name,t.onload=$,t.readAsDataURL(e.files[0])}}function R(e){Y=e,X.maximumCanvasHeight=window.innerHeight-54,X.maximumCanvasWidth=window.innerWidth-110}function T(e){return function e(t){let n="";return Object.keys(t).forEach(o=>{"object"==typeof t[o]?n+=`<${o}>${e(t[o])}</${o}>`:n+=`<${o}>${t[o]}</${o}>`}),n}(e)}let Z=null;function S(e){const t=document.createElement("a"),n=new Blob([e],{type:"text/plain"});return t.setAttribute("href",window.URL.createObjectURL(n)),t.setAttribute("download",`${new RegExp("^([^.]+)").exec(E.name)[0]}.xml`),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.draggable=!0,t.classList.add("dragout"),t}function N(){if(s(),Z.backgroundColor){!function(e){S(e).click()}(T(function(e,t){const n={};return n.annotations=function(e,t){return{folder:"Unknown",filename:t.name,path:"Unknown",source:{database:"Unknown"},size:{width:e.getWidth(),height:e.getHeight(),depth:1},segmented:0}}(e,t),n.annotations.object=function(e){let t={};return e.forEachObject(e=>{const n=e._objects[0],o=e._objects[1].text;t={name:o,pose:"Unspecified",truncated:1,difficult:0,bndbox:{xmin:n.left,ymin:n.top,xmax:n.left+n.width,ymax:n.top+n.height}}}),t}(e),n}(Z,E)))}}!function(){const e=new r.a.Canvas("c",{selection:!1});r.a.Object.prototype.transparentCorners=!1,k=e,R(e),function(e){Z=e}(e)}(),window.createNewBndBox=W,window.createNewPolygon=A,window.removeBndBox=h,window.uploadImage=H,window.downloadXML=N}]);